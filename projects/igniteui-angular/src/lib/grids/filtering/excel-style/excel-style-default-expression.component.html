<igx-drop-down
    #dropdownConditions
    [maxHeight]="'200px'"
    [width]="getInputWidth(inputGroupConditions)"
    (onSelection)="onConditionsChanged($event)"
    (onClosed)="onDropdownClosed()">
    <igx-drop-down-item *ngFor="let condition of conditions" [value]="condition" [selected]="isConditionSelected(condition)">
        <igx-icon fontSet="filtering-icons" [name]="getCondition(condition).iconName"></igx-icon>
        <span>{{ translateCondition(condition) }}</span>
    </igx-drop-down-item>
</igx-drop-down>

<igx-input-group
    #inputGroupConditions
    (click)="toggleCustomDialogDropDown(inputGroupConditions, dropdownConditions)"
    type="box"
    [displayDensity]="'compact'"
    [supressInputAutofocus]="true">

    <igx-prefix>
        <igx-icon *ngIf="expressionUI.expression.condition" fontSet="filtering-icons" [name]="getIconName()"></igx-icon>
        <igx-icon *ngIf="!expressionUI.expression.condition">filter_list</igx-icon>
    </igx-prefix>

    <input
        igxInput
        (keydown)="onInputKeyDown($event)"
        [igxDropDownItemNavigation]="dropdownConditions"
        tabindex="0"
        [placeholder]="inputConditionsPlaceholder"
        autocomplete="off"
        [value]="getConditionName(expressionUI.expression.condition)"
        [readonly]="true" 
    />
</igx-input-group>
<igx-drop-down 
    #dropdownValues 
    [maxHeight]="'200px'"
    [width]="getInputWidth(inputGroupValues)"
    (onSelection)="onValuesChanged($event)"
    (onOpening)="onDropdownValuesOpening()"
    (onOpened)="onDropdownValuesOpened()"
    (onClosed)="onDropdownClosed()">
    <igx-drop-down-item *ngFor="let filterItem of valuesData | customfilter:expressionUI.expression.searchVal:acPage" [value]="filterItem">
        <span>
            {{ column.formatter ? column.formatter(filterItem) : column.dataType === 'number' ? (filterItem | igxdecimal: column.grid.locale) : filterItem }}
        </span>
    </igx-drop-down-item>
    <igx-drop-down-item (mousedown)='loadMore($event)'
    *ngIf="(valuesData | customfilter:expressionUI.expression.searchVal:acPage).length < (valuesData | customfilter:expressionUI.expression.searchVal:acPage:true).length">
        <span>Load more...</span>
    </igx-drop-down-item>
</igx-drop-down>

<igx-input-group #inputGroupValues type="box" [displayDensity]="'compact'" [supressInputAutofocus]="true">
    <input
        #inputValues
        igxInput
        tabindex="0"
        [placeholder]="inputValuePlaceholder"
        [disabled]="expressionUI.expression.condition && expressionUI.expression.condition.isUnary"
        autocomplete="off"
        [igxAutocomplete]="dropdownValues"
        [igxAutocompleteDisabled]="true"
        (keydown)="onInputValuesKeydown($event)"
        [ngModel]="expressionUI.expression.searchVal"
        (ngModelChange)="fakeSearchExpression.next($event)"
    />

    <igx-icon igxSuffix
        (click)="toggleCustomDialogDropDown(inputGroupValues, dropdownValues)"
        [igxDropDownItemNavigation]="dropdownValues">
        arrow_drop_down
    </igx-icon>
</igx-input-group>

<button (click)="onRemoveButtonClick()" igxButton="icon" *ngIf="!isSingle">
    <igx-icon>cancel</igx-icon>
</button>

<igx-buttongroup #logicOperatorButtonGroup
    *ngIf="!isLast"
    [multiSelection]="false">
    <span igxButton
        tabindex="0"
        #andButton
        (keydown)="onLogicOperatorKeyDown($event, 0)"
        [selected]="expressionUI.afterOperator === 0"
        type="button"
        (click)="onLogicOperatorButtonClicked($event, 0)">
        {{ grid.resourceStrings.igx_grid_filter_operator_and }}
    </span>

    <span igxButton
        tabindex="0"
        #orButton
        (keydown)="onLogicOperatorKeyDown($event, 1)"
        [selected]="expressionUI.afterOperator === 1"
        type="button"
        (click)="onLogicOperatorButtonClicked($event, 1)">
        {{ grid.resourceStrings.igx_grid_filter_operator_or }}
    </span>
</igx-buttongroup>
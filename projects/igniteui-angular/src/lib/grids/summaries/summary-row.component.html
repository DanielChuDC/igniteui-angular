<ng-container *ngIf="summaries.size">
    <ng-container *ngIf="indentation">
        <div class="igx-grid__row-indentation igx-grid__row-indentation--level-{{indentation}}"></div>
    </ng-container>
    <ng-container *ngIf="grid.summariesMargin">
        <div
        class="igx-grid__summaries-patch"
        [style.min-width.px]="grid.summariesMargin"
        [style.flex-basis.px]="grid.summariesMargin"
        ></div>
    </ng-container>

<ng-container *ngIf="!grid.hasColumnLayouts">
        <ng-container *ngIf="pinnedColumns.length > 0">
            <igx-grid-summary-cell *ngFor="let col of pinnedColumns | igxNotGrouped"
                class="igx-grid-summary--cell igx-grid-summary--fw igx-grid-summary--pinned"
                [class.igx-grid-summary--empty]="!col.hasSummary"
                [class.igx-grid-summary--pinned-last]="col.isLastPinned"
                [column]="col"
                [firstCellIndentation]="firstCellIndentation"
                [rowIndex]="index"
                [summaryResults]="getColumnSummaries(col.field)"
                [hasSummary]="col.hasSummary"
                [density]="grid.displayDensity"
                [style.max-height.px]="minHeight"
                [style.min-height.px]="minHeight">
            </igx-grid-summary-cell>
        </ng-container>
        <ng-template igxGridFor let-col [igxGridForOf]="unpinnedColumns | igxNotGrouped" [igxForScrollContainer]="grid.parentVirtDir" let-colIndex="index" [igxForScrollOrientation]="'horizontal'" [igxForContainerSize]="grid.unpinnedWidth" [igxForTrackBy]="grid.trackColumnChanges" [igxForSizePropName]='"calcWidth"' #igxDirRef>
            <igx-grid-summary-cell
                class="igx-grid-summary--cell igx-grid-summary--fw"
                [class.igx-grid-summary--empty]="!col.hasSummary"
                [column]="col"
                [rowIndex]="index"
                [firstCellIndentation]="firstCellIndentation"
                [summaryResults]="getColumnSummaries(col.field)"
                [hasSummary]="col.hasSummary"
                [density]="grid.displayDensity"
                [style.max-height.px]="minHeight"
                [style.min-height.px]="minHeight">
            </igx-grid-summary-cell>
        </ng-template>
    </ng-container>
</ng-container>

<ng-container *ngIf="grid.hasColumnLayouts">
    <ng-container *ngIf="pinnedColumns.length > 0">
        <div *ngFor="let col of pinnedColumns | igxTopLevel" class="igx-grid__mrl_block"
        [ngStyle]="{'grid-template-rows':col.getGridTemplate(true, false),
        'grid-template-columns':col.getGridTemplate(false, false),
        '-ms-grid-rows':col.getGridTemplate(true, true),
        '-ms-grid-columns':col.getGridTemplate(false, true)}">
                <igx-grid-summary-cell *ngFor="let child of col.children"
                class="igx-grid-summary--cell igx-grid-summary--fw igx-grid-summary--pinned"
                [class.igx-grid-summary--empty]="!col.hasSummary"
                [class.igx-grid-summary--pinned-last]="col.isLastPinned"
                [column]="child"
                [firstCellIndentation]="firstCellIndentation"
                [rowIndex]="index"
                [summaryResults]="getColumnSummaries(child.field)"
                [hasSummary]="child.hasSummary"
                [density]="grid.displayDensity"
             >
            </igx-grid-summary-cell>
        </div>
    </ng-container>
    <ng-template igxGridFor let-col [igxGridForOf]="unpinnedColumns | igxTopLevel" [igxForScrollContainer]="grid.parentVirtDir" let-colIndex="index" [igxForScrollOrientation]="'horizontal'" [igxForContainerSize]='grid.unpinnedWidth' [igxForSizePropName]='"calcWidth"' [igxForTrackBy]='grid.trackColumnChanges' #igxDirRef>
        <div class="igx-grid__mrl_block"
        [ngStyle]="{'grid-template-rows':col.getGridTemplate(true, false),
     'grid-template-columns':col.getGridTemplate(false, false),
     '-ms-grid-rows':col.getGridTemplate(true, true),
     '-ms-grid-columns':col.getGridTemplate(false, true)}">
            <igx-grid-summary-cell *ngFor="let child of col.children"
            class="igx-grid-summary--cell igx-grid-summary--fw"
            [class.igx-grid-summary--empty]="!col.hasSummary"
            [column]="child"
            [rowIndex]="index"
            [firstCellIndentation]="firstCellIndentation"
            [summaryResults]="getColumnSummaries(child.field)"
            [hasSummary]="child.hasSummary"
            [density]="grid.displayDensity"
          >
            </igx-grid-summary-cell>
        </div>
    </ng-template>
</ng-container>
